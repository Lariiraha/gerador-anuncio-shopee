<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerador de An√∫ncio Shopee</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #c9a3ff, #e0caff);
      color: #333;
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 1100px;
      margin: auto;
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      padding: 20px;
    }
    h1 {
      color: #7b2cbf;
      text-align: center;
      margin-bottom: 15px;
    }
    label {
      font-weight: bold;
      color: #5a189a;
    }
    input, textarea, select, button {
      width: 100%;
      margin: 4px 0;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }
    .grid-2 > div {
      display: flex;
      flex-direction: column;
    }
    button {
      background-color: #9d4edd;
      color: #fff;
      font-size: 16px;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
      margin-top: 12px;
    }
    button:hover {
      background-color: #7b2cbf;
    }
    .output {
      background: #f9f6ff;
      border: 1px solid #ddd;
      padding: 16px;
      border-radius: 10px;
      margin-top: 24px;
    }
    .output-section {
      margin-bottom: 20px;
    }
    .output-section h2 {
      color: #5a189a;
      margin-bottom: 6px;
    }
    .output-section pre {
      white-space: pre-wrap;
      background: #fff;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 15px;
      line-height: 1.6;
    }
    .preco-final {
      background-color: #d4b1ff;
      padding: 20px;
      border-radius: 12px;
      font-size: 22px;
      font-weight: bold;
      color: #4c1d95;
      margin-bottom: 16px;
      text-align: center;
    }
    .preco-final small {
      display: block;
      font-weight: normal;
      margin-top: 8px;
    }
    .custo-breakdown {
      background: #fff;
      border: 1px solid #dcdcdc;
      border-radius: 12px;
      padding: 16px;
      font-size: 16px;
      line-height: 1.8;
      color: #333;
    }
    .custo-breakdown b {
      color: #7b2cbf;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üåü Gerador de An√∫ncio Shopee com IA</h1>

    <div class="grid-2">
      <div>
        <label for="nomeProduto">Nome do Produto:</label>
        <input type="text" id="nomeProduto" placeholder="Ex: Garrafa Inox">
      </div>
      <div>
        <label for="custoProduto">Custo do Produto (R$):</label>
        <input type="number" id="custoProduto" placeholder="Ex: 10">
      </div>

      <div>
        <label for="aliquota">Al√≠quota de Imposto (%):</label>
        <input type="number" id="aliquota" placeholder="Ex: 6">
      </div>
      <div>
        <label for="margem">Margem Desejada (%):</label>
        <input type="number" id="margem" placeholder="Ex: 30">
      </div>

      <div>
        <label for="comissao">Comiss√£o da Shopee:</label>
        <select id="comissao">
          <option value="0.14">N√£o participo do programa de frete gr√°tis (14%)</option>
          <option value="0.20">Participo do programa de frete gr√°tis (20%)</option>
        </select>
      </div>
      <div>
        <label for="antecipacao">Shopee antecipa:</label>
        <select id="antecipacao">
          <option value="0">N√£o participa</option>
          <option value="0.02">Sim - 2%</option>
          <option value="0.025">Sim - 2.5%</option>
          <option value="0.03">Sim - 3.0%</option>
          <option value="0.035">Sim - 3.5%</option>
        </select>
      </div>
    </div>

    <label for="descProduto">Descri√ß√£o B√°sica do Produto:</label>
    <textarea id="descProduto" placeholder="Ex: Garrafa Inox Vermelha 500 ml"></textarea>

    <button id="btnGerar">‚ú® Gerar Conte√∫do com IA</button>

    <div class="output" id="resultado">
      <div class="output-section">
        <h2>Resultado</h2>
        <pre id="blocoResultado">Nada gerado ainda.</pre>
      </div>
      <div class="output-section">
        <h2>üí∞ C√°lculo de Precifica√ß√£o</h2>
        <div id="blocoPreco" class="custo-breakdown">Preencha os campos acima e clique em "Gerar".</div>
      </div>
      <div class="output-section">
        <h2>üìà Palavras-chaves mais buscadas</h2>
        <pre id="palavrasChave"></pre>
      </div>
      <div class="output-section">
        <h2>üí¢ Dores solucionadas</h2>
        <pre id="doresSolucionadas"></pre>
      </div>
      <div class="output-section">
        <h2>üöß Obje√ß√µes comuns</h2>
        <pre id="obje√ß√µes"></pre>
      </div>
      <div class="output-section">
        <h2>üéØ Benef√≠cios do produto</h2>
        <pre id="beneficiosProduto"></pre>
      </div>
      <div class="output-section">
        <h2>üîÑ Formas de Uso</h2>
        <pre id="formaUso"></pre>
      </div>
      <div class="output-section">
        <h2>üë• Interesse do p√∫blico-alvo</h2>
        <pre id="interessePublico"></pre>
      </div>
      <div class="output-section">
        <h2>üé¨ Roteiro VEO3</h2>
        <pre id="roteiroVeo3"></pre>
      </div>
      <div class="output-section">
        <h2>üîé T√≠tulo SEO</h2>
        <pre id="tituloSeo"></pre>
      </div>
      <div class="output-section">
        <h2>üìù Descri√ß√£o</h2>
        <pre id="descricaoProduto"></pre>
      </div>
    </div>
  </div>

  <script type="module">
    document.getElementById('btnGerar').addEventListener('click', async function() {
      const nome = document.getElementById('nomeProduto').value;
      const desc = document.getElementById('descProduto').value;
      const resultado = document.getElementById('blocoResultado');
      const blocoPreco = document.getElementById('blocoPreco');
      const palavrasChave = document.getElementById('palavrasChave');
      const doresSolucionadas = document.getElementById('doresSolucionadas');
      const obje√ß√µes = document.getElementById('obje√ß√µes');
      const beneficiosProduto = document.getElementById('beneficiosProduto');
      const formaUso = document.getElementById('formaUso');
      const interessePublico = document.getElementById('interessePublico');
      const roteiroVeo3 = document.getElementById('roteiroVeo3');
      const tituloSeo = document.getElementById('tituloSeo');
      const descricaoProduto = document.getElementById('descricaoProduto');

      const custo = parseFloat(document.getElementById('custoProduto').value || 0);
      const imposto = parseFloat(document.getElementById('aliquota').value || 0) / 100;
      const margem = parseFloat(document.getElementById('margem').value || 0) / 100;
      const comissao = parseFloat(document.getElementById('comissao').value || 0);
      const antecipacao = parseFloat(document.getElementById('antecipacao').value || 0);

      const custoFixo = 4.00;
      const custoTotal = custo + custoFixo;
      const percentualLiquido = 1 - (imposto + margem + comissao + antecipacao);
      const precoFinal = custoTotal / percentualLiquido;

      const valorImposto = precoFinal * imposto;
      const valorComissao = precoFinal * comissao;
      const valorAntecipacao = precoFinal * antecipacao;
      const valorMargem = precoFinal * margem;

      blocoPreco.innerHTML = `
        <div class="preco-final">üí∏ Pre√ßo Sugerido de Venda: R$ ${precoFinal.toFixed(2)}<br>
        <small>Margem de contribui√ß√£o: R$ ${valorMargem.toFixed(2)} (${(margem * 100).toFixed(1)}%)</small></div>
        <div class="custo-breakdown">
          <div><b>Custo do produto:</b> R$ ${custo.toFixed(2)}</div>
          <div><b>Taxa fixa operacional:</b> R$ ${custoFixo.toFixed(2)}</div>
          <div><b>Impostos (${(imposto * 100).toFixed(1)}%):</b> R$ ${valorImposto.toFixed(2)}</div>
          <div><b>Comiss√£o Shopee (${(comissao * 100).toFixed(1)}%):</b> R$ ${valorComissao.toFixed(2)}</div>
          <div><b>Shopee antecipa (${(antecipacao * 100).toFixed(1)}%):</b> R$ ${valorAntecipacao.toFixed(2)}</div>
        </div>
      `;

      const prompt = `Com base no seguinte produto:\n\nNome: ${nome}\nDescri√ß√£o b√°sica: ${desc}\n\nResponda os t√≥picos abaixo de forma clara e objetiva:\n\n1. Liste 10 palavras-chave pelas quais as pessoas procuram por esse produto online.\n2. Liste 10 dores que esse produto resolve.\n3. Liste 10 obje√ß√µes comuns de compradores.\n4. Liste 10 benef√≠cios do produto.\n5. Contextos de uso ideais.\n6. Interesses do p√∫blico-alvo.\n7. Roteiro para v√≠deo VEO3 dividido em 3 blocos de 10 segundos (colunas: tempo, cena, fala pt/en, cen√°rio, edi√ß√£o e IA recomendada).\n8. T√≠tulo SEO com no m√°ximo 60 caracteres (sem pontua√ß√£o).\n9. Descri√ß√£o para Mercado Livre com 5 perguntas frequentes.`;

      resultado.textContent = 'Consultando a IA...';

      const response = await fetch('https://api.openai.com/v1/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer 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`
        },
        body: JSON.stringify({
          model: "text-davinci-003",
          prompt: prompt,
          max_tokens: 150,
          temperature: 0.7
        })
      });

      const data = await response.json();

      palavrasChave.textContent = data.choices[0].text.split('\n')[0];
      doresSolucionadas.textContent = data.choices[0].text.split('\n')[1];
      obje√ß√µes.textContent = data.choices[0].text.split('\n')[2];
      beneficiosProduto.textContent = data.choices[0].text.split('\n')[3];
      formaUso.textContent = data.choices[0].text.split('\n')[4];
      interessePublico.textContent = data.choices[0].text.split('\n')[5];
      roteiroVeo3.textContent = data.choices[0].text.split('\n')[6];
      tituloSeo.textContent = data.choices[0].text.split('\n')[7];
      descricaoProduto.textContent = data.choices[0].text.split('\n')[8];
    });
  </script>
</body>
</html>
